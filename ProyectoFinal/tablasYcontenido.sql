CREATE TABLE Clientes(
	dni_cliente INT PRIMARY KEY,
    nombre VARCHAR(150),
    apellido VARCHAR(150),
    mail VARCHAR(150),
    CONSTRAINT chequear_largo_dni CHECK (LENGTH(dni_cliente) = 8)
);

CREATE TABLE Productos(
	id_producto INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(150),
    cantidad_disponible INT,
    categoria VARCHAR(20),
    ventas_totales INT,
    CHECK(categoria IN ('Carnes', 'Frutos Secos', 'Bebidas', 'Verduras', 'Condimentos')) 
);

CREATE TABLE OrdenesDeCompra(
	id_orden INT PRIMARY KEY AUTO_INCREMENT,
    dni_cliente INT DEFAULT NULL,
    id_producto INT DEFAULT NULL,
    cantidad INT,
    fecha DATE,
    estado VARCHAR(20),
    FOREIGN KEY (dni_cliente) REFERENCES Clientes(dni_cliente)
    ON UPDATE CASCADE ON DELETE SET NULL, -- De esta manera, cuando se elimine un cliente (lo cual no seria posible sin poner DEFAULT NULL despues de declara el atributo) el atibuto va a pasar a ser Null y asi no hay inconsistencias en la tabla: Si un cliente no existe, entonces no pudo haber hecho un pedido
    FOREIGN KEY (id_producto) REFERENCES Productos(id_producto)
    ON UPDATE CASCADE ON DELETE SET NULL, -- Lo mismo con el producto: Si un producto no existe, entonces no pudo haber sido encargado
    CHECK(estado IN ('En proceso', 'Entregado'))
);

INSERT INTO Clientes (dni_cliente, nombre, apellido, mail) VALUES
(12345678, 'Juan', 'Pérez', 'juan.perez@example.com'),
(23456789, 'Ana', 'Gómez', 'ana.gomez@example.com'),
(34567890, 'Pedro', 'Ramírez', 'pedro.ramirez@example.com'),
(45678901, 'María', 'López', 'maria.lopez@example.com'),
(56789012, 'Luis', 'Martínez', 'luis.martinez@example.com'),
(67890123, 'Laura', 'González', 'laura.gonzalez@example.com'),
(78901234, 'Carlos', 'Hernández', 'carlos.hernandez@example.com'),
(89012345, 'Sofía', 'Torres', 'sofia.torres@example.com'),
(90123456, 'Martín', 'Silva', 'martin.silva@example.com'),
(10234567, 'Lucía', 'Morales', 'lucia.morales@example.com');

-- Insertar datos en la tabla Productos
INSERT INTO Productos (nombre, cantidad_disponible, categoria, ventas_totales) VALUES
('Carne de Res', 50, 'Carnes', 20),
('Nueces', 30, 'Frutos Secos', 10),
('Vino Tinto', 100, 'Bebidas', 40),
('Zanahorias', 60, 'Verduras', 25),
('Pimienta Negra', 20, 'Condimentos', 15),
('Pollo', 70, 'Carnes', 35),
('Almendras', 25, 'Frutos Secos', 12),
('Cerveza', 200, 'Bebidas', 100),
('Tomates', 80, 'Verduras', 50),
('Sal Marina', 15, 'Condimentos', 8);

INSERT INTO OrdenesDeCompra (dni_cliente, id_producto, cantidad, fecha, estado) VALUES
(12345678, 1, 5, '2024-11-20', 'En proceso'),
(12345678, 2, 3, '2024-11-21', 'Entregado'),
(12345678, 3, 2, '2024-11-22', 'En proceso'),
(12345678, 4, 4, '2024-11-23', 'Entregado'),
(12345678, 5, 1, '2024-11-24', 'En proceso'),
(12345678, 6, 6, '2024-11-25', 'Entregado'),
(12345678, 7, 7, '2024-11-26', 'En proceso'),
(12345678, 8, 8, '2024-11-27', 'Entregado'),
(12345678, 9, 3, '2024-11-28', 'En proceso'),
(12345678, 10, 2, '2024-11-29', 'Entregado'),
(23456789, 1, 4, '2024-11-30', 'En proceso'),
(23456789, 2, 5, '2024-12-01', 'Entregado'),
(23456789, 3, 3, '2024-12-02', 'En proceso'),
(23456789, 4, 1, '2024-12-03', 'Entregado'),
(23456789, 5, 2, '2024-12-04', 'En proceso'),
(23456789, 6, 6, '2024-12-05', 'Entregado'),
(23456789, 7, 8, '2024-12-06', 'En proceso'),
(23456789, 8, 4, '2024-12-07', 'Entregado'),
(23456789, 9, 2, '2024-12-08', 'En proceso'),
(23456789, 10, 1, '2024-12-09', 'Entregado'),
(34567890, 1, 5, '2024-11-20', 'En proceso'),
(34567890, 2, 3, '2024-11-21', 'Entregado'),
(34567890, 3, 2, '2024-11-22', 'En proceso'),
(34567890, 4, 4, '2024-11-23', 'Entregado'),
(34567890, 5, 1, '2024-11-24', 'En proceso'),
(34567890, 6, 6, '2024-11-25', 'Entregado'),
(34567890, 7, 7, '2024-11-26', 'En proceso'),
(34567890, 8, 8, '2024-11-27', 'Entregado'),
(34567890, 9, 3, '2024-11-28', 'En proceso'),
(34567890, 10, 2, '2024-11-29', 'Entregado'),
(45678901, 1, 4, '2024-11-30', 'En proceso'),
(45678901, 2, 5, '2024-12-01', 'Entregado'),
(45678901, 3, 3, '2024-12-02', 'En proceso'),
(45678901, 4, 1, '2024-12-03', 'Entregado'),
(45678901, 5, 2, '2024-12-04', 'En proceso'),
(45678901, 6, 6, '2024-12-05', 'Entregado'),
(45678901, 7, 8, '2024-12-06', 'En proceso'),
(45678901, 8, 4, '2024-12-07', 'Entregado'),
(45678901, 9, 2, '2024-12-08', 'En proceso'),
(45678901, 10, 1, '2024-12-09', 'Entregado'),
(56789012, 1, 2, '2024-11-20', 'En proceso'),
(56789012, 2, 4, '2024-11-21', 'Entregado'),
(56789012, 3, 6, '2024-11-22', 'En proceso'),
(56789012, 4, 1, '2024-11-23', 'Entregado'),
(56789012, 5, 5, '2024-11-24', 'En proceso'),
(56789012, 6, 7, '2024-11-25', 'Entregado'),
(56789012, 7, 3, '2024-11-26', 'En proceso'),
(56789012, 8, 2, '2024-11-27', 'Entregado'),
(56789012, 9, 4, '2024-11-28', 'En proceso'),
(56789012, 10, 1, '2024-11-29', 'Entregado'),
(67890123, 1, 5, '2024-11-30', 'En proceso'),
(67890123, 2, 3, '2024-12-01', 'Entregado'),
(67890123, 3, 8, '2024-12-02', 'En proceso'),
(67890123, 4, 2, '2024-12-03', 'Entregado'),
(67890123, 5, 1, '2024-12-04', 'En proceso'),
(67890123, 6, 6, '2024-12-05', 'Entregado'),
(67890123, 7, 7, '2024-12-06', 'En proceso'),
(67890123, 8, 9, '2024-12-07', 'Entregado'),
(67890123, 9, 3, '2024-12-08', 'En proceso'),
(67890123, 10, 4, '2024-12-09', 'Entregado'),
(78901234, 1, 6, '2024-11-20', 'En proceso'),
(78901234, 2, 2, '2024-11-21', 'Entregado'),
(78901234, 3, 1, '2024-11-22', 'En proceso'),
(78901234, 4, 8, '2024-11-23', 'Entregado'),
(78901234, 5, 9, '2024-11-24', 'En proceso'),
(78901234, 6, 5, '2024-11-25', 'Entregado'),
(78901234, 7, 3, '2024-11-26', 'En proceso'),
(78901234, 8, 4, '2024-11-27', 'Entregado'),
(78901234, 9, 2, '2024-11-28', 'En proceso'),
(78901234, 10, 7, '2024-11-29', 'Entregado'),
(89012345, 1, 4, '2024-11-30', 'En proceso'),
(89012345, 2, 5, '2024-12-01', 'Entregado'),
(89012345, 3, 2, '2024-12-02', 'En proceso'),
(89012345, 4, 6, '2024-12-03', 'Entregado'),
(89012345, 5, 8, '2024-12-04', 'En proceso'),
(89012345, 6, 9, '2024-12-05', 'Entregado'),
(89012345, 7, 1, '2024-12-06', 'En proceso'),
(89012345, 8, 3, '2024-12-07', 'Entregado'),
(89012345, 9, 7, '2024-12-08', 'En proceso'),
(89012345, 10, 4, '2024-12-09', 'Entregado'),
(90123456, 1, 1, '2024-11-20', 'En proceso'),
(90123456, 2, 4, '2024-11-21', 'Entregado'),
(90123456, 3, 6, '2024-11-22', 'En proceso'),
(90123456, 4, 2, '2024-11-23', 'Entregado'),
(90123456, 5, 3, '2024-11-24', 'En proceso'),
(90123456, 6, 8, '2024-11-25', 'Entregado'),
(90123456, 7, 7, '2024-11-26', 'En proceso'),
(90123456, 8, 9, '2024-11-27', 'Entregado'),
(90123456, 9, 4, '2024-11-28', 'En proceso'),
(90123456, 10, 5, '2024-11-29', 'Entregado'),
(10234567, 1, 3, '2024-11-30', 'En proceso'),
(10234567, 2, 2, '2024-12-01', 'Entregado'),
(10234567, 3, 7, '2024-12-02', 'En proceso'),
(10234567, 4, 6, '2024-12-03', 'Entregado'),
(10234567, 5, 9, '2024-12-04', 'En proceso'),
(10234567, 6, 5, '2024-12-05', 'Entregado'),
(10234567, 7, 8, '2024-12-06', 'En proceso'),
(10234567, 8, 1, '2024-12-07', 'Entregado'),
(10234567, 9, 3, '2024-12-08', 'En proceso'),
(10234567, 10, 6, '2024-12-09', 'Entregado');
